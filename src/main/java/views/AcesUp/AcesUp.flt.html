<h1>Aces Up</h1>

<link href="/assets/css/AcesUp.css" rel="stylesheet">
<script type="text/javascript" src="/assets/webjars/jquery/2.1.3/jquery.js"></script>

<body>
<ul class="buttonList">
    <li>
        <button id="dealButton">Deal</button>
    </li>
    <li>
        <button id="rulesButton">Rules</button>
    </li>
    <li>
        <button id="NGButton">New Game</button>
    </li>
</ul>

<div id="introModal" class="intro-modal">
    <div class="modal-content">
        <h1 class="welcomeText">Welcome to AcesUp!</h1>

        <p class="introText">Please choose the version of the game that you'd like to play</p>
        <div class="buttonsDiv">
            <button id="normalGame">Normal</button>
            <button id="spanishGame">Spanish</button>
        </div>
    </div>
</div>

<!--<button id = "infoButton" title = "Rules" type = button">?</button>-->
<div id = "myModal" class = "modal">
    <div class = "modal-content">
        <span class = "close">&times;</span>
        <h1 class="rules-title">RULES</h1>

        <p>
        <h2 class="english-title">English:</h2>
            <ul>
                <li>You can remove a card when there is a card in another pile that has a the same suit AND a higher value</li>
                <li>Aces are the highest value and 2's are the lowest value</li>
                <li>If a column is empty, you can move a card from any other column to fill that spot</li>
                <li>The game is won if all cards have been removed except the four aces</li>
            </ul>
        </p>

        <h2 class="spanish-title">Spanish:</h2>
        <ul>
            <li>Spanish deck uses the following suits: bastos (clubs), oros (golden coins), copas (cups), and espadas (swords).</li>
            <li>The deck contains 50 cards: nine ranked cards per suit (1-9), three face cards per suit (10-12), and 2 comodines cards (Jokers).</li>
            <li>The Joker cards are considered wild cards, which means they match with any suit and act as the highest valued card for that suit, which means you can remove any card from the top of a pile. However, once the Joker card has been matched with another card in the game, both cards are removed from the game.</li>
        </ul>
        </p>
    </div>
</div>

<!-- Javascript for intro modal -->
<script type="text/javascript">
    var introModal = document.getElementById('introModal');
    var rbtn = document.getElementById('normalGame');
    var sbtn = document.getElementById('spanishGame');

    $(document).ready(function(){
        introModal.style.display = "block";
    });

    rbtn.onclick = function(){
        console.log("Regular game button clicked! ");
        $.getJSON("http://localhost:8080/game", function( data ) {
            display(data);
            game = data;
        });
        introModal.style.display = "none";
    }

    sbtn.onclick = function(){
        console.log("Spanish game button clicked! ");
        $.getJSON("http://localhost:8080/spanishGame", function( data ) {
            display(data);
            game = data;
        });
        introModal.style.display = "none";
    }
</script>

<!-- Javascript for the info button-->
<script>
    var modal = document.getElementById('myModal');

    var btn = document.getElementById("rulesButton");
    if(btn){
        console.log("Button is not null");
    }

    var span = document.getElementsByClassName("close")[0];
    if(span){
        console.log("Span is not null");
    }

    btn.onclick = function(){
        console.log("Button was clicked");
        modal.style.display = "block";
    }

    span.onclick = function(){
        modal.style.display = "none";
    }

    window.onclick = function(event){
        if(event.target == modal){
        modal.style.display = "none";
        }
    }
</script>

<table>
    <tr class="title">
        <td>Column0</td>
        <td >Column1</td>
        <td >Column2</td>
        <td >Column3</td>
    </tr>

    <tr><td class="columnOfCards" id="c0">
        <table>
            <tr><td class="cardLocation l0"></td></tr>
            <tr><td class="cardLocation l1"></td></tr>
            <tr><td class="cardLocation l2"></td></tr>
            <tr><td class="cardLocation l3"></td></tr>
            <tr><td class="cardLocation l4"></td></tr>
            <tr><td class="cardLocation l5"></td></tr>
            <tr><td class="cardLocation l6"></td></tr>
            <tr><td class="cardLocation l7"></td></tr>
            <tr><td class="cardLocation l8"></td></tr>
            <tr><td class="cardLocation l9"></td></tr>
            <tr><td class="cardLocation l10"></td></tr>
            <tr><td class="cardLocation l11"></td></tr>
            <tr><td class="cardLocation l12"></td></tr>
            <tr><td class="cardLocation l13"></td></tr>
        </table>
    </td>
        <td class="columnOfCards" id="c1">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c2">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
        <td class="columnOfCards" id="c3">
            <table>
                <tr><td class="cardLocation l0"></td></tr>
                <tr><td class="cardLocation l1"></td></tr>
                <tr><td class="cardLocation l2"></td></tr>
                <tr><td class="cardLocation l3"></td></tr>
                <tr><td class="cardLocation l4"></td></tr>
                <tr><td class="cardLocation l5"></td></tr>
                <tr><td class="cardLocation l6"></td></tr>
                <tr><td class="cardLocation l7"></td></tr>
                <tr><td class="cardLocation l8"></td></tr>
                <tr><td class="cardLocation l9"></td></tr>
                <tr><td class="cardLocation l10"></td></tr>
                <tr><td class="cardLocation l11"></td></tr>
                <tr><td class="cardLocation l12"></td></tr>
                <tr><td class="cardLocation l13"></td></tr>
            </table>
        </td>
    </tr>
</table>


<BR>Remove from: <button id="Remove1">Column 0</button><button id="Remove2">Column 1</button><button id="Remove3">Column 2</button><button id="Remove4">Column 3</button>

<BR>Move from: <select id="from_col">
    <option value="0">Column 0</option>
    <option value="1">Column 1</option>
    <option value="2">Column 2</option>
    <option value="3">Column 3</option>
</select>
To
<select id="to_col">
    <option value="0">Column 0</option>
    <option value="1">Column 1</option>
    <option value="2">Column 2</option>
    <option value="3">Column 3</option>
</select>

<button id="moveButton">Move</button>

<script>

//card suits
var game;
var suits = { "Spades": '♠', "Hearts":'♡', "Diamonds":'♢', "Clubs":'♣', "Oros": 'O', "Copas":'C', "Espadas":'E', "Bastos":'B', "Comodines":'@'}
var pattern = {11:"J", 12:"Q", 13:"K", 14:"A", 15:' ', ' ':15, 'A':14, 'K':13, 'Q':12, 'J':11}
function display(game) {
    console.log(game);


    $( '.columnOfCards .cardLocation' ).html("");
     $.each(game.columns[0].cards, function( key, val ) {
            $( '#c0 .l'+key ).html(val.value + val.suit);
        });
     $.each(game.columns[1].cards, function( key, val ) {
            $( '#c1 .l'+key ).html(val.value + val.suit);
        });
     $.each(game.columns[2].cards, function( key, val ) {
            $( '#c2 .l'+key ).html(val.value + val.suit);
        });
     $.each(game.columns[3].cards, function( key, val ) {
            $( '#c3 .l'+key ).html(val.value + val.suit);
        });
}

// Calls ApplicationController.gameGet()
$.getJSON("http://localhost:8080/game", function( data ) {
display(data);
game = data;
});


$("#dealButton").click(function(){
console.log("dealButton clicked! ");

$.ajax({
  type: "POST",
  url: "/dealGame",
  data: JSON.stringify(game),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        game = data;
        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


function removeCard(colNumber){
$.ajax({
type: "POST",
url: "/removeCard/"+colNumber,
data: JSON.stringify(game),
success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
game = data;
display(data);},
contentType:"application/json; charset=utf-8",
dataType:"json",
});

}


$("#Remove1").click(function(){
    removeCard(0);
});
$("#Remove2").click(function(){
    removeCard(1);
});
$("#Remove3").click(function(){
    removeCard(2);
});
$("#Remove4").click(function(){
    removeCard(3);
});


$("#moveButton").click(function(){
var colFrom = $("#from_col").val();
var colTo = $("#to_col").val();
$.ajax({
  type: "POST",
  url: "/moveCard/"+colFrom+"/"+colTo,
  data: JSON.stringify(game),
  success: function(data, status){console.log("Data: " + data + "\nStatus: " + status);
        game = data;
        display(data);},
  contentType:"application/json; charset=utf-8",
  dataType:"json",
});
});


</script>

<!-- Javascript for New Game Button -->
<script>
var NGbtn = document.getElementById("NGButton");

if(!NGbtn) {
    console.log("New Game Button is NULL ");
}

NGbtn.onclick = function() {
    console.log("NGButton clicked! ");
    window.location.href = "http://localhost:8080";
}

</script>

<div id="footer">
    <p class="teamInfo">By Team 31</p>
</div>

</body>
</html>